@model ServiceEditPagePartialDTO

<form id="CreateFormId" class="row" method="POST" action="/Service/CreateEdit/" oninput="InputValidator(this)">
    <input type="hidden" name="Id" value="@Model.Id" />
    <h2 class="col-12">Informace o službě</h2>
    <div class="col-12 mb-3">
        <label class="input">
            <input required name="URL" class="input-field" type="text" data-url="URLLabelId" placeholder=" " value="@Model.URL"/>
            <span id="URLLabelId" class="input-label">URL služby</span>
        </label>
    </div>
    <div class="col-12 col-md-6 mb-3">
        <label class="input">
            <input required name="Name" class="input-field" type="text" placeholder=" " value="@Model.Name" />
            <span class="input-label">Název</span>
        </label>
    </div>
    <div class="col-12 col-md-6 mb-3">
        <label class="input">
            <select class="input-select" name="Type"> 
                @foreach (ServiceTypeEnum type in Enum.GetValues(typeof(ServiceTypeEnum)))
                {
                    if (type == Model.Type)
                    {
                        <option value="@type" selected>@type</option>
                    }
                    else
                    {
                        <option value="@type">@type</option>
                    }
                }
            </select>
            <span class="input-label">Typ služby</span>
        </label>
    </div>
    <div class="col-12 col-md-6 mb-3">
        <label class="input">
            <select class="input-select" name="HttpMethod"> 
                @foreach (HttpMethodEnum method in Enum.GetValues(typeof(HttpMethodEnum)))
                {
                    if (method == Model.HttpMethod)
                    {
                        <option value="@method" selected>@method</option>
                    }
                    else
                    {
                        <option value="@method">@method</option>
                    }
                }
            </select>
            <span class="input-label">HTTP metoda</span>
        </label>
    </div>
    <div class="col-12 col-md-6 mb-3">
        <label class="input">
            <select class="input-select" name="Serialization"> 
                @foreach (SerializationEnum serialization in Enum.GetValues(typeof(SerializationEnum)))
                {
                    if (serialization == Model.Serialization)
                    {
                        <option value="@serialization" selected>@serialization.ToLabel()</option>
                    }
                    else
                    {
                        <option value="@serialization">@serialization.ToLabel()</option>
                    }
                }
            </select>
            <span class="input-label">Serializace dat</span>
        </label>
    </div>
    <div class="col-12 mb-2">
        <label class="input">
            <textarea name="Description" class="input-field" type="text" placeholder=" ">@Model.Description</textarea>
            <span class="input-label">Popis</span>
        </label>
    </div>
</form>
<h3>Hlavičky služby</h3>
<div id="ServiceHeadersId" class="mb-3">
    @await Html.PartialAsync("Partial/_HeaderAll", Model.Headers)
</div>
@await Html.PartialAsync("Partial/_DataSchemaCreateEdit", Model.Id)
<div class="row">
    <div class="col-12 col-xl-6">
        <div class="d-flex justify-content-between mb-2">
            <h4 class="mt-1 mb-0" >Vstupní atributy</h4>
            <div>
                @if (Model.Id == Guid.Empty)
                {
                    <button type="button" class="butn btn-p" title="Nejdříve je nutné službu vytvořit." disabled>Testovat</button>    
                    <button type="button" class="butn btn-p" title="Nejdříve je nutné službu vytvořit." disabled>Přidat</button>
                }
                else
                {
                    <button id="ServiceTestBtnId" type="button" class="butn btn-p" onclick="TestService(this, '@Model.Id')">Testovat</button>    
                    <button id="AddInputBtnId" type="button" class="butn btn-p" onclick="InputAttribAdd(this)">Přidat</button>
                }
            </div>
        </div>
        <div id="InputSchemaId">
            @await Html.PartialAsync("Partial/_InputDataSchema", 
                    (Model.InputAttributes as IEnumerable<IDataSchemaNode>))
        </div>
        <div id="TestInputId"></div>
        <div id="OutputInputId" class="mt-3"></div>
    </div>
    <div class="col-12 col-xl-6">
        <div class="d-flex justify-co ntent-between mb-2">
            <h4 class="mt-1 mb-0" >Výstupní atributy</h4>
        </div>
        <div id="OutputSchemaId">
            @await Html.PartialAsync("Partial/_OutputDataSchema", 
                    (Model.OutputAttributes as IEnumerable<IDataSchemaNode>))
        </div>
    </div>
</div>